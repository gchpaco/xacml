<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- Generated by Swindle/html (http://www.barzilay.org/Swindle/) -->
<html>
<head>
  <title>Documentation for 'swindle/extra.ss'</title>
</head>
<body bgcolor="#C0C0FF" text="#000000" link="#B00000" vlink="#600000" alink="#FF0000">
<h1 align="center">Documentation for '<tt>swindle/extra.ss</tt>'</h1>
<hr>
<p>
This module defines some additional useful functionality which requires
Swindle.
</p>
<hr>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="357"><tt><b>(defstruct <tt>&lt;struct-name&gt;</tt> ([super]) slot ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  This is just a Swindle-style syntax for one of
    (define-struct struct-name (slot ...) (make-inspector))
    (define-struct (struct-name super) (slot ...) (make-inspector))
  with an additional binding of &lt;struct-name&gt; to the Swindle class that
  is computed by '<a href="tiny-clos-doc.html#186" title="Documentation for 'swindle/struct-type->class.ss'"><tt>struct-type-&gt;class</tt></a>'.  The '<tt>(make-inspector)</tt>' is needed
  to make this a struct that we can access information on.  Note that in
  method specifiers, the '<tt>struct:foo</tt>' which is defined by
  '<tt>define-struct</tt>' can be used just like '<tt>&lt;foo&gt;</tt>'.  What all this means is
  that you can use MzScheme structs if you just want Swindle's generic
  functions, but use built in structs that are more efficient since they
  are part of the implementation.  For example:

    =&gt; (defstruct &lt;foo&gt; () x y)
    =&gt; &lt;foo&gt;
    #&lt;primitive-class:foo&gt;
    =&gt; (defmethod (bar [x &lt;foo&gt;]) (foo-x x))
    =&gt; (bar (make-foo 1 2))
    1
    =&gt; (defmethod (bar [x struct:foo]) (foo-x x))
    =&gt; (bar (make-foo 3 4))
    3
    =&gt; (generic-methods bar)
    (#&lt;method:bar:foo&gt;)
    =&gt; (defstruct &lt;foo2&gt; (foo) z)
    =&gt; (bar (make-foo2 10 11 12))
    10

  To make things even easier, the super-struct can be written using a
  &quot;&lt;...&gt;&quot; syntax which will be stripped, and appropriate methods are
  added to '<a href="tiny-clos-doc.html#220" title="Documentation for 'swindle/allocate-instance.ss'"><tt>allocate-instance</tt></a>' and '<a href="tiny-clos-doc.html#221" title="Documentation for 'swindle/initialize.ss'"><tt>initialize</tt></a>' so structs can be built
  using keywords:

    =&gt; (defstruct &lt;foo3&gt; (&lt;foo&gt;) z)
    =&gt; (foo-x (make &lt;foo3&gt; :z 3 :y 2 :x 1))
    1
    =&gt; (foo3-z (make &lt;foo3&gt; :z 3 :y 2 :x 2))
    3

  The '<tt>&lt;struct-name&gt;</tt>' identifier *must* be of this form -- enclosed in
  &quot;&lt;&gt;&quot;s.  This restriction is due to the fact that defining an MzScheme
  struct '<tt>foo</tt>', makes '<tt>foo</tt>' bound as a syntax object to something that
  cannot be used in any other way.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="358"><tt><b>(with-slots obj (slot ...) body ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  Evaluate the body in an environment where each '<tt>slot</tt>' is defined as a
  symbol-macro that accesses the corresponding slot value of '<tt>obj</tt>'.
  Each '<tt>slot</tt>' is either an identifier '<tt>id</tt>' which makes it stand for
  `(slot-ref obj 'id)', or `(id slot)' which makes '<tt>id</tt>' stand for
  `(slot-ref obj 'slot)'.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="359"><tt><b>(with-accessors obj (accessor ...) body ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  Evaluate the body in an environment where each '<tt>accessor</tt>' is defined
  as a symbol-macro that accesses '<tt>obj</tt>'.  Each '<tt>accessor</tt>' is either an
  identifier '<tt>id</tt>' which makes it stand for `(id obj)', or
  `(id accessor)' which makes '<tt>id</tt>' stand for `(accessor obj);.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="360"><tt><b>(as class obj)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[generic]</td>
  </tr>
</table>
<pre>  Converts '<tt>obj</tt>' to an instance of '<a href="clos-doc.html#241" title="Documentation for 'swindle/class.ss'"><tt>class</tt></a>'.  This is a convenient
  generic wrapper around Scheme conversion functions (functions that
  look like '<tt>foo-&gt;bar</tt>'), but can be used for other classes too.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="361"><tt><b>(add-as-method from-class to-class op ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  Adds a method to '<a href="extra-doc.html#360" title="Documentation for 'swindle/as.ss'"><tt>as</tt></a>' that will use the function '<tt>op</tt>' to convert
  instances of '<tt>from-class</tt>' to instances of '<tt>to-class</tt>'.  More operators
  can be used which will make this use their composition.  This is used
  to initialize '<a href="extra-doc.html#360" title="Documentation for 'swindle/as.ss'"><tt>as</tt></a>' with the standard Scheme conversion functions.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="362"><tt><b>(equals? x y)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[generic]</td>
  </tr>
</table>
<pre>  A generic that compares '<tt>x</tt>' and '<tt>y</tt>'.  It has an around method that
  will stop and return '<tt>#t</tt>' if the two arguments are '<tt>equal?</tt>'.  It is
  intended for user-defined comparison between any instances.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="363"><tt><b>(add-equals?-method class pred?)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  Adds a method to '<a href="extra-doc.html#362" title="Documentation for 'swindle/equals?.ss'"><tt>equals?</tt></a>' that will use the given '<tt>pred?</tt>' predicate
  to compare instances of '<a href="clos-doc.html#241" title="Documentation for 'swindle/class.ss'"><tt>class</tt></a>'.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="364"><tt><b>(class+slots-equals? x y)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  This is a predicate function (not a generic function) that will
  succeed if '<tt>x</tt>' and '<tt>y</tt>' are instances of the same class, and all of
  their corresponding slots are '<a href="extra-doc.html#362" title="Documentation for 'swindle/equals?.ss'"><tt>equals?</tt></a>'.  This is useful as a quick
  default for comparing simple classes (but be careful and avoid
  circularity problems).
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="365"><tt><b>(make-equals?-compare-class+slots class)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  Make '<a href="clos-doc.html#241" title="Documentation for 'swindle/class.ss'"><tt>class</tt></a>' use '<a href="extra-doc.html#364" title="Documentation for 'swindle/class+slots-equals?.ss'"><tt>class+slots-equals?</tt></a>' for comparison with '<a href="extra-doc.html#362" title="Documentation for 'swindle/equals?.ss'"><tt>equals?</tt></a>'.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="366"><tt><b>(add x ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[generic]</td>
  </tr>
</table>
<pre>  A generic addition operation, initialized for some Scheme types
  (numbers (+), lists (append), strings (string-append), symbols
  (symbol-append), procedures (compose), and vectors).  It dispatches
  only on the first argument.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="367"><tt><b>(add-add-method class op)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  Add a method to '<a href="extra-doc.html#366" title="Documentation for 'swindle/add.ss'"><tt>add</tt></a>' that will use '<tt>op</tt>' to add objects of class
  '<a href="clos-doc.html#241" title="Documentation for 'swindle/class.ss'"><tt>class</tt></a>'.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="368"><tt><b>(len x)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[generic]</td>
  </tr>
</table>
<pre>  A generic length operation, initialized for some Scheme types (lists
  (length), strings (string-length), vectors (vector-length)).
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="369"><tt><b>(add-len-method class op)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  Add a method to '<a href="extra-doc.html#368" title="Documentation for 'swindle/len.ss'"><tt>len</tt></a>' that will use '<tt>op</tt>' to measure objects length for
  instances of '<a href="clos-doc.html#241" title="Documentation for 'swindle/class.ss'"><tt>class</tt></a>'.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="370"><tt><b>(ref x indexes...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[generic]</td>
  </tr>
</table>
<pre>  A generic reference operation, initialized for some Scheme types and
  instances.  Methods are predefined for lists, vectors, strings,
  objects, hash-tables, boxes, promises, parameters, and namespaces.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="371"><tt><b>(add-ref-method class op)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  Add a method to '<a href="extra-doc.html#370" title="Documentation for 'swindle/ref.ss'"><tt>ref</tt></a>' that will use '<tt>op</tt>' to reference objects of class
  '<a href="clos-doc.html#241" title="Documentation for 'swindle/class.ss'"><tt>class</tt></a>'.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="372"><tt><b>(put! x v indexes)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[generic]</td>
  </tr>
</table>
<pre>  A generic setter operation, initialized for some Scheme types and
  instances.  The new value comes first so it is possible to add methods
  to specialize on it.  Methods are predefined for lists, vectors,
  strings, objects, hash-tables, boxes, parameters, and namespaces.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="373"><tt><b>(add-put!-method class op)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  Add a method to '<a href="extra-doc.html#372" title="Documentation for 'swindle/put!.ss'"><tt>put!</tt></a>' that will use '<tt>op</tt>' to change objects of class
  '<a href="clos-doc.html#241" title="Documentation for 'swindle/class.ss'"><tt>class</tt></a>'.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="374"><tt><b>(set-ref! x indexes... v)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  This syntax will just translate to `(put! x v indexes...)'.  It makes
  it possible to make `(set! (ref ...) ...)' work with '<a href="extra-doc.html#372" title="Documentation for 'swindle/put!.ss'"><tt>put!</tt></a>'.
</pre>
<hr>
<a name="375"><h2>Generic-based printing mechanism</h2></a>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="376"><tt><b>*print-level*</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[parameter]</td>
  </tr>
  <tr>
    <td><a name="377"><tt><b>*print-length*</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[parameter]</td>
  </tr>
</table>
<pre>  These parameters control how many levels deep a nested data object
  will print, and how many elements are printed at each level.  '<tt>#f</tt>'
  means no limit.  The effect is similar to the corresponding globals in
  Lisp.  Only affects printing of container objects (like lists, vectors
  and structures).
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="378"><tt><b>(print-object obj esc? port)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[generic]</td>
  </tr>
</table>
<pre>  Prints '<tt>obj</tt>' on '<tt>port</tt>' using the above parameters -- the effect of
  '<tt>esc?</tt>' being true is to use a '<tt>write</tt>'-like printout rather than a
  '<tt>display</tt>'-like printout when it is false.  Primitive Scheme values are
  printed normally, Swindle objects are printed using the un-'<tt>read</tt>'-able
  &quot;#&lt;...&gt;&quot; sequence unless a method that handles them is defined.  For
  this printout, objects with a '<tt>name</tt>' slot are printed using that name
  (and their class's name).

  Warning: this is the method used for user-interaction output, errors
  etc.  Make sure you only define reliable methods for it.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="352"><tt><b>(print-object-with-slots obj esc? port)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  This is a printer function that can be used for classes where the
  desired output shows slot values.  Note that it is a simple function,
  which should be embedded in a method that is to be added to
  '<a href="extra-doc.html#378" title="Documentation for 'swindle/print-object.ss'"><tt>print-object</tt></a>'.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="379"><tt><b>(display-object obj [port])</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
  <tr>
    <td><a name="380"><tt><b>(write-object obj [port])</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  Used to display and write an object using '<a href="extra-doc.html#378" title="Documentation for 'swindle/print-object.ss'"><tt>print-object</tt></a>'.  Used as the
  corresponding output handler functions.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="381"><tt><b>(object-&gt;string obj [esc? = #t])</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  Convert the given '<tt>obj</tt>' to a string using its printed form.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="382"><tt><b>(install-swindle-printer)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  In MzScheme, output is configurable on a per-port basis.  Use this
  function to install Swindle's '<a href="extra-doc.html#379" title="Documentation for 'swindle/display-object.ss'"><tt>display-object</tt></a>' and '<a href="extra-doc.html#380" title="Documentation for 'swindle/write-object.ss'"><tt>write-object</tt></a>' on
  the current output and error ports whenever they are changed
  ('<tt>swindle</tt>' does that on startup).  This makes it possible to see
  Swindle values in errors, when using '<tt>printf</tt>' etc.
</pre>
<hr>
<a name="383"><h2>Simple matching</h2></a>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="384"><tt><b>match-failure</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[value]</td>
  </tr>
</table>
<pre>  The result for a matcher function application that failed.  You can
  return this value from a matcher function in a &lt;matcher&gt; so the next
  matching one will get invoked.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="385"><tt><b>(matching? matcher value)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  The '<a href="extra-doc.html#386" title="Documentation for 'swindle/matcher.ss'"><tt>matcher</tt></a>' argument is a value of any type, which is matched
  against the given '<tt>value</tt>'.  For most values matching means being equal
  (using '<a href="extra-doc.html#362" title="Documentation for 'swindle/equals?.ss'"><tt>equals?</tt></a>')  to, but there are some exceptions: class objects
  are tested with '<a href="tiny-clos-doc.html#243" title="Documentation for 'swindle/instance-of?.ss'"><tt>instance-of?</tt></a>', functions are used as predicates,
  literals are used with equals?, pairs are compared recursively and
  regexps are used with regexp-match.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="387"><tt><b>(let/match pattern value body ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  Match the '<tt>value</tt>' against the given '<tt>pattern</tt>', and evaluate the body
  on a success.  It is an error for the match to fail.  Variables that
  get bound in the matching process can be used in the body.

  The pattern specification has a complex syntax as follows:
  - simple values (not symbols) are compared with '<a href="extra-doc.html#385" title="Documentation for 'swindle/matching?.ss'"><tt>matching?</tt></a>' above;
  - :x                 keywords are also used as literal values;
  - *                  is a wildcard that always succeeds;
  - ???                matches the '<a href="tiny-clos-doc.html#172" title="Documentation for 'swindle/???.ss'"><tt>???</tt></a>' value;
  - (lambda ...)       use the resulting closure value (for predicates);
  - (quote ...)        use the contents as a simple value;
  - (quasiquote ...)   same;
  - (V := P)           assign the variable V to the value matched by P;
  - V                  for a variable name V that was not part of the
                       pattern so far, this matches anything and binds V
                       to the value -- the same as (V := *);
  - (! E)              evaluate E, use the result as a literal value;
  - (!! E)             evaluate E, continue matching only if it is true;
  - (V when E)         same as (and V (!! E));
  - (and P ...)        combine the matchers with and, can bind any
                       variables in all parts;
  - (or P ...)         combine the matchers with or, bound variables are
                       only from the successful form;
  - (if A B C)         same as (or (and A B) C);
  - (F =&gt; P)           continue matching P with (F x) (where is x is the
                       current matched object);
  - (V :: P ...)       same as (and (! V) P...), useful for class forms
                       like (&lt;class&gt; :: (foo =&gt; f) ...);
  - (make &lt;class&gt; ...) if the value is an instance of &lt;class&gt;, then
                       continue by the '<tt>...</tt>' part which is a list of
                       slot names and patterns -- a slot name is either
                       :foo or 'foo, and the pattern will be matched
                       against the contents of that slot in the original
                       &lt;class&gt; instance;
  - ???                matches the unspecified value ('<a href="tiny-clos-doc.html#172" title="Documentation for 'swindle/???.ss'"><tt>???</tt></a>' in tiny-clos)
  - (regexp R)         convert R to a regexp and use that to match
                       strings;
  - (regexp R P ...)   like the above, but continue matching the result
                       with `(P ...)' so it can bind variables to the
                       result (something like `(regexp &quot;a(x?)b&quot; x y)'
                       will bind '<tt>x</tt>' to the '<tt>regexp-match</tt>' result, and
                       '<tt>y</tt>' to a match of the sub-regexp part);
  - (...)              other lists - match the elements of a list
                       recursively (can use a dot suffix for a &quot;rest&quot;
                       arguments).

Note that variable names match anything and bind the name to the result,
except when the name was already seen -- where the previously bound
value is used, allowing patterns where some parts should match the same
value.  (A name was '<tt>seen</tt>' if it was previously used in the pattern
except on different branches of an '<tt>or</tt>' pattern.)
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="386"><tt><b>(matcher pattern body ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  This creates a matcher function, using the given '<tt>pattern</tt>' which will
  be matched with the list of given arguments on usage.  If the given
  arguments fail to match on an application, an error will be raised.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="165"><tt><b>(match x (pattern expr ...) ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  This is similar to a '<tt>cond</tt>' statement but each clause starts with a
  pattern, possibly binding variables for its body.  It also handles
  '<tt>else</tt>' as a last clause.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="388"><tt><b><tt>&lt;matcher&gt;</tt></b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[class]</td>
  </tr>
</table>
<pre>  A class similar to a generic function, that holds matcher functions
  such as the ones created by the '<a href="extra-doc.html#386" title="Documentation for 'swindle/matcher.ss'"><tt>matcher</tt></a>' macro.  It has three slots:
  '<tt>name</tt>', '<tt>default</tt>' (either a default value or a function that is
  applied to the arguments to produce the default value), and '<tt>matchers</tt>'
  (a list of matcher functions).
</pre>
<pre>  Instance of '<a href="tiny-clos-doc.html#208" title="Documentation for 'swindle/<entity-class>.ss'"><tt>&lt;entity-class&gt;</tt></a>', subclass of '<a href="tiny-clos-doc.html#210" title="Documentation for 'swindle/<generic>.ss'"><tt>&lt;generic&gt;</tt></a>'.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="389"><tt><b>(defmatcher (name pattern) body ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
  <tr>
    <td><a name="390"><tt><b>(defmatcher0 (name pattern) body ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  These macros define a matcher (if not defined yet), create a matcher
  function and add it to the matcher (either at the end (defmatcher) or
  at the beginning (defmatcher0)).
</pre>
<hr>
<a name="391"><h2>An amb macro</h2></a>
<pre>This is added just because it is too much fun to miss.  To learn about
'<a href="extra-doc.html#392" title="Documentation for 'swindle/amb.ss'"><tt>amb</tt></a>', look for it in the Help Desk, in the &quot;Teach Yourself Scheme in
Fixnum Days&quot; on-line manual.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="392"><tt><b>(amb expr ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  Execute forms in a nondeterministic way: each form is tried in
  sequence, and if one fails then evaluation continues with the next.
  '<tt>(amb)</tt>' fails immediately.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="393"><tt><b>(amb-assert cond)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  Asserts that '<tt>cond</tt>' is true, fails otherwise.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="394"><tt><b>(amb-collect expr)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  Evaluate expr, using amb-fail repeatedly until all options are
  exhausted and returns the list of all results.
</pre>
<hr>
<a name="395"><h2>Very basic UI - works also in console mode</h2></a>
<pre>The following defines some hacked UI functions that works using MrEd GUI
if it is available, or the standard error and input ports otherwise.
The check is done by looking for a GUI global binding.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="396"><tt><b>*dialog-title*</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[parameter]</td>
  </tr>
</table>
<pre>  This parameter defines the title used for the hacked UI interface.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="397"><tt><b>(message fmt-string arg ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  Like '<tt>printf</tt>' with a prefix title, or using a message dialog box.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="398"><tt><b>(ok/cancel? fmt-string arg ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
  <tr>
    <td><a name="399"><tt><b>(yes/no? fmt-string arg ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[procedure]</td>
  </tr>
</table>
<pre>  These functions are similar to '<a href="extra-doc.html#397" title="Documentation for 'swindle/message.ss'"><tt>message</tt></a>', but they are used to ask an
  &quot;ok/cancel&quot; or a &quot;yes/no&quot; question.  They return a boolean.
</pre>
</body>
</html>
<!-- Generated by Swindle/html -->
