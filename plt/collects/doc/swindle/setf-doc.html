<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- Generated by Swindle/html (http://www.barzilay.org/Swindle/) -->
<html>
<head>
  <title>Documentation for 'swindle/setf.ss'</title>
</head>
<body bgcolor="#C0C0FF" text="#000000" link="#B00000" vlink="#600000" alink="#FF0000">
<h1 align="center">Documentation for '<tt>swindle/setf.ss</tt>'</h1>
<hr>
<p>
This module provides the forms '<a href="setf-doc.html#16" title="Documentation for 'swindle/setf!.ss'"><tt>setf!</tt></a>', '<a href="setf-doc.html#18" title="Documentation for 'swindle/psetf!.ss'"><tt>psetf!</tt></a>', and '<a href="setf-doc.html#19" title="Documentation for 'swindle/setf!-values.ss'"><tt>setf!-values</tt></a>' for
generic setters, much like CL's '<tt>setf</tt>', and '<tt>psetf</tt>', and a form similar
to MzScheme's '<a href="turbo-doc.html#29" title="Documentation for 'swindle/set!-values.ss'"><tt>set!-values</tt></a>'.  Note that when these are later re-exported
(by '<tt>turbo</tt>'), they are renamed as '<a href="turbo-doc.html#17" title="Documentation for 'swindle/set!.ss'"><tt>set!</tt></a>', '<a href="turbo-doc.html#30" title="Documentation for 'swindle/pset!.ss'"><tt>pset!</tt></a>', and '<a href="turbo-doc.html#29" title="Documentation for 'swindle/set!-values.ss'"><tt>set!-values</tt></a>'
(overriding the built-in '<a href="turbo-doc.html#17" title="Documentation for 'swindle/set!.ss'"><tt>set!</tt></a>' and '<a href="turbo-doc.html#29" title="Documentation for 'swindle/set!-values.ss'"><tt>set!-values</tt></a>').  Also, note that
this just defines the basic functionality, the '<tt>misc</tt>' module defines
many common setters.
</p>
<hr>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="16"><tt><b>(setf! place value ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  Expand `(setf! (foo ...) v)' to `(set-foo! ... v)'.  The generated
  '<tt>set-foo!</tt>' identifier has the same syntax context as '<tt>foo</tt>', which
  means that to use this for some '<tt>foo</tt>' you need to define '<tt>set-foo!</tt>'
  either as a function or a syntax in the same definition context of
  '<tt>foo</tt>'.  The nice feature that comes out of this and the syntax system
  is that examples like the following work as expected:
    (let ([foo car] [set-foo! set-car!]) (setf! (foo a) 11))

  '<tt>place</tt>' gets expanded before this processing is done so macros work
  properly.  If the place is not a form, then this will just use the
  standard '<a href="turbo-doc.html#17" title="Documentation for 'swindle/set!.ss'"><tt>set!</tt></a>'.

  Another extension of the original '<a href="turbo-doc.html#17" title="Documentation for 'swindle/set!.ss'"><tt>set!</tt></a>' is that it allows changing
  several places in sequence -- `(setf! x a y b)' will set '<tt>x</tt>' to '<tt>a</tt>'
  and then set '<tt>y</tt>' to '<tt>b</tt>'.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="18"><tt><b>(psetf! place value ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  This is very similar to '<a href="setf-doc.html#16" title="Documentation for 'swindle/setf!.ss'"><tt>setf!</tt></a>' above, except that the change to the
  places is done *simultaneously*.  For example, `(setf! x y y x)'
  switches the values of the two variables.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="19"><tt><b>(setf!-values (place ...) expr)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  This is a version of '<a href="setf-doc.html#16" title="Documentation for 'swindle/setf!.ss'"><tt>setf!</tt></a>', that works with multiple values.  '<tt>expr</tt>'
  is expected to evaluate to the correct number of values, and these are
  then put into the specified places which can be an place suited to
  '<a href="setf-doc.html#16" title="Documentation for 'swindle/setf!.ss'"><tt>setf!</tt></a>'.  Note that no duplication of identifiers is checked, if an
  identifier appears more than once then it will have the last assigned
  value.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="20"><tt><b>(set-values! places ... values-expr)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
  <tr>
    <td><a name="21"><tt><b>(set-list! places ... list-expr)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
  <tr>
    <td><a name="22"><tt><b>(set-vector! places ... vector-expr)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  These are defined as special forms that use '<a href="setf-doc.html#19" title="Documentation for 'swindle/setf!-values.ss'"><tt>setf!-values</tt></a>' to set the
  given places to the appropriate components of the third form.  This
  allows foing the following:
    =&gt; (define (values a b c) (values 1 2 3))
    =&gt; (setf! (values a b c) (values 11 22 33))
    =&gt; (list a b c)
    (11 22 33)
    =&gt; (setf! (list a b c) (list 111 222 333))
    =&gt; (list a b c)
    (111 222 333)
    =&gt; (setf! (list a b c) (list 1111 2222 3333))
    =&gt; (list a b c)
    (1111 2222 3333)
  Furthermore, since the individual setting of each place is eventually
  done with '<a href="setf-doc.html#16" title="Documentation for 'swindle/setf!.ss'"><tt>setf!</tt></a>', then this can be used recursively:
    =&gt; (set! (list a (vector b) (vector c c)) '(2 #(3) #(4 5)))
    =&gt; (list a b c)
    (2 3 5)
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="23"><tt><b>(shift! place ... newvalue)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  This is similar to CL's '<tt>shiftf</tt>' -- it is roughly equivalent to
    (begin0 place1
            (psetf! place1 place2
                    place2 place3
                    ...
                    placen newvalue))
  except that it avoids evaluating index subforms twice, for example:
    =&gt; (let ([foo (lambda (x) (printf &quot;&gt;&gt;&gt; ~s\n&quot; x) x)]
             [a '(1)] [b '(2)])
         (list (shift! (car (foo a)) (car (foo b)) 3) a b))
    &gt;&gt;&gt; (1)
    &gt;&gt;&gt; (2)
    (1 (2) (3))
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="24"><tt><b>(rotate! place ...)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  This is similar to CL's '<tt>rotatef</tt>' -- it is roughly equivalent to
    (psetf! place1 place2
            place2 place3
            ...
            placen place1)
  except that it avoids evaluating index subforms twice.
</pre>
<table width="100%" cellpadding="3" cellspacing="0" border="1" vspace="3" frame="border" rules="rows" bgcolor="#D0A0D0" bordercolor="#806080">
  <tr>
    <td><a name="25"><tt><b>(inc! place [delta])</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
  <tr>
    <td><a name="26"><tt><b>(dec! place [delta])</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
  <tr>
    <td><a name="27"><tt><b>(push! x place)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
  <tr>
    <td><a name="28"><tt><b>(pop! place)</b></tt></a></td>
    <td align="right">&nbsp;&nbsp;&nbsp;[syntax]</td>
  </tr>
</table>
<pre>  These are some simple usages of '<a href="setf-doc.html#16" title="Documentation for 'swindle/setf!.ss'"><tt>setf!</tt></a>'.  Note that they also avoid
  evaluating any indexes twice.
</pre>
</body>
</html>
<!-- Generated by Swindle/html -->
